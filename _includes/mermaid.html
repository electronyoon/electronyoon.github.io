<script>
(function() {
  const hasMermaid = document.querySelector('code.language-mermaid, pre > code.language-mermaid');
  if (!hasMermaid) return;

  const script = document.createElement('script');
  script.src = 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js';
  script.onload = function() {
    mermaid.initialize({ startOnLoad: false, theme: 'default' });

    document.querySelectorAll('pre > code.language-mermaid').forEach(function(code) {
      const pre = code.parentElement;
      const div = document.createElement('div');
      div.className = 'mermaid';
      div.textContent = code.textContent;
      pre.replaceWith(div);
    });

    mermaid.run();
  };
  document.head.appendChild(script);
})();
</script>
