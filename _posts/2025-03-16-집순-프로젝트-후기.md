---
layout: post
title: "집순 프로젝트 후기"
category: reviews
last_modified_at: 2025-03-17
---

1. [부동산은 불편하다](#1-부동산은-불편하다)
2. [컨셉](#2-컨셉)
3. [구현](#3-구현)
4. [챌린지](#4-챌린지)

---

# 1. 부동산은 불편하다

- 저는 네이버 부동산으로 망상하는 걸 좋아합니다. 남의 집을 염탐하며 "저기서는 어떻게 살아볼까" 새로운 삶을 꿈꿔보곤 해요.

- 그런데 그거 아시나요. 가장 개인적이어야 할 내 공간인데도, 내 기호에 딱 맞는 부동산을 찾아주는 서비스는 어디에도 없습니다.

- 네이버 부동산이나 피터팬같은 국내 업체들만을 이야기하는 건 아닙니다. 북미의 유명한 사이트들인 zillow, realtor 등도 마찬가지입니다.

<img src="{{ site.baseurl }}/assets/attachments/2025-03-16/Figure 1.png" style="width: 100%; height: auto;">

- 다들 이렇게 말하는 듯합니다. "네가 뭘 원하는 지는 모르겠어, 여기 다 줄테니 알아서 체크박스에 클릭해. 방 2개, 에어컨 1개, 욕조 1개."

- 그런데 나에게 맞는 공간이 건축물대장 비스무리한 일람표 하나 있으면 찾아진답니까?

- 누군가는 편의점이 가깝기를, 누군가는 체육시설이 주변에 있기를 바랄 수도 있죠. 누군가는 지하철만 좋아하고 버스는 싫어하지만, 누군가에겐 둘 다 상관 없을 수도 있습니다. 주차장에 물이 잠기는게 무서워 지형상 고지대를 선호할수도 있구요. 상대적으로 제일 낮은 범죄율의 도시에 살고싶어할 수도 있습니다.

- 집순 프로젝트는 이래서 만들어졌습니다.

    > 다양한 부동산 정보를 조합해 의사 결정을 돕고 싶다.

---

# 2. 컨셉

<img src="{{ site.baseurl }}/assets/attachments/2025-03-16/Figure 2.png" style="width: 80%; height: auto;">

- 유저마다 개인화된 매물 점수를 제공하고 싶었습니다.

- 유저는 `평가` 방식을 조합해 나만의 매물 점수를 만들 수 있고요.

- 수많은 평가 방식은 `평가 보따리`에서 제공하는 겁니다.

<img src="{{ site.baseurl }}/assets/attachments/2025-03-16/Figure 3.png" style="width: 80%; height: auto;">

- 그런데 잘 생각해보면, 서로 다른 테마의 평가를 제공하려면 그에 맞는 데이터가 필요합니다.

- 가령 매물의 공원 접근성을 평가하려면, 적어도 전국에 있는 공원의 위치나 면적 등은 가지고 있어야 하죠.

- 그래서 각 평가기준의 `파이프라인`도 만들기로 했습니다.

---

# 3. 구현

- 집순의 데이터 처리 과정은 네 단계로 구성됩니다.

```
1. 매물 수집 → 2. 평가에 필요한 정보 수집 → 3. 점수 계산 → 4. 정규화
```

- 각 단계는 Job으로 분리돼 있어요. [DataPipelineService](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/application/pipeline/DataPipelineService.java)가 각 job을 순서대로 실행합니다. 

<br>

➊ [EstateJob](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/job/estate/EstateJobConfig.java): 전국 부동산 매물을 찾아 DB에 저장합니다.
- 이를테면 네이버 부동산에서 네이버 매물을 json으로 가져오는 식이죠. → [NaverLandClient](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/infrastructure/external/naver/NaverLandClient.java)

<br>

➋ [SourceJob](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/job/source/SourceJobConfig.java): 점수를 낼 때 필요한 데이터를 DB에 저장합니다.
- 이를테면 전국 공원 정보가 담긴 csv 파일을 Parks 테이블에 저장하는 식이죠. → [ParkSourceCollector](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/infrastructure/processor/source/collector/ParkSourceCollector.java)

<br>

➌ [ScoreJob](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/job/score/ScoreJobConfig.java): 특정 척도에 따라 매물별로 점수를 계산합니다.
- 이를테면 공원의 개수, 면적 등을 고려해 11, 20, 19 따위의 점수를 내는 식이죠. → [ParkScoreCalculator](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/infrastructure/processor/score/calculator/ParkScoreCalculator.java)

<br>

➍ [NormalizeJob](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/job/normalize/NormalizeJobConfig.java): 계산된 점수를 0-10점 사이로 정규화합니다.
- 이를테면 11, 20, 19 따위의 점수를 5, 10, 7점 따위로 변환하는 식이죠. → [LinearScoreNormalizer](https://github.com/f-lab-edu/zipsoon/blob/main/batch/src/main/java/com/zipsoon/batch/infrastructure/processor/normalize/normalizer/LinearScoreNormalizer.java)

<br>

- 각 단계는 수평적 확장에 열려있습니다. 만약 교통이나 편의점 평가 척도를 새로 만들고 싶다면, `TrafficScoreCalculator`나 `ConvstoreScoreCalculator` 등을 만들어 추가하면 됩니다.

---

# 4. 챌린지

(작성 중)